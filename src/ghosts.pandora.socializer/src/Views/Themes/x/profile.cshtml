@{
    var profileUsername = (ViewContext.RouteData.Values["username"] as string)?.Trim();
    if (string.IsNullOrWhiteSpace(profileUsername))
    {
        profileUsername = Context.Request.Cookies["username"];
    }

    profileUsername ??= "user";
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@profileUsername (@profileUsername) / X</title>
    <link rel="stylesheet" href="css/profile.css">
    <link rel="icon" href="images/x-icon.png">
    <style>
        .follow-action-form {
            margin-left: 12px;
        }

        .follow-action-button {
            background: #1d9bf0;
            border: none;
            color: #fff;
            padding: 8px 16px;
            border-radius: 999px;
            font-weight: 600;
            cursor: pointer;
        }

        .connections-columns {
            display: grid;
            gap: 12px;
            margin-top: 16px;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        }

        .connections-column {
            background: #0f1419;
            border: 1px solid #2f3336;
            border-radius: 12px;
            padding: 16px;
        }

        .connections-column h3 {
            margin: 0 0 12px;
            font-size: 14px;
            color: #e7e9ea;
        }

        .connections-scroll {
            max-height: 220px;
            overflow-y: auto;
        }

        .connection-item {
            background: transparent;
        }

        .connection-item:hover {
            background: rgba(29, 155, 240, 0.15);
        }

        .connection-name {
            color: #e7e9ea;
        }

        .connection-bio {
            color: #8b98a5;
        }
    </style>
</head>
<body>
    <div class="app">
        <!-- Left Sidebar -->
        <div class="sidebar">
            <div class="sidebar-content">
                <div class="logo">
                    <img src="images/x-logo.png" alt="X" class="x-logo">
                </div>
                <nav class="nav-menu">
                    <a href="feed.html" class="nav-item">
                        <span class="nav-icon">üè†</span>
                        <span class="nav-text">Home</span>
                    </a>
                    <a href="#" class="nav-item">
                        <span class="nav-icon">üîç</span>
                        <span class="nav-text">Explore</span>
                    </a>
                    <a href="#" class="nav-item">
                        <span class="nav-icon">üîî</span>
                        <span class="nav-text">Notifications</span>
                    </a>
                    <a href="#" class="nav-item">
                        <span class="nav-icon">‚úâÔ∏è</span>
                        <span class="nav-text">Messages</span>
                    </a>
                    <a href="#" class="nav-item">
                        <span class="nav-icon">üîñ</span>
                        <span class="nav-text">Bookmarks</span>
                    </a>
                    <a href="#" class="nav-item">
                        <span class="nav-icon">üë•</span>
                        <span class="nav-text">Communities</span>
                    </a>
                    <a href="#" class="nav-item">
                        <span class="nav-icon">‚ùå</span>
                        <span class="nav-text">Premium</span>
                    </a>
                    <a href="profile.html" class="nav-item active">
                        <span class="nav-icon">üë§</span>
                        <span class="nav-text">Profile</span>
                    </a>
                    <a href="#" class="nav-item">
                        <span class="nav-icon">‚ãØ</span>
                        <span class="nav-text">More</span>
                    </a>
                </nav>
                <button class="post-button">Post</button>
            </div>
            <div class="user-info">
                <img src="/u/@profileUsername/avatar" alt="@profileUsername" class="user-avatar">
                <div class="user-details">
                    <div class="username">@profileUsername</div>
                    <div class="handle">@($"@{profileUsername}")</div>
                </div>
                <span class="more-options">‚ãØ</span>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Header -->
            <div class="profile-header">
                <div class="header-nav">
                    <button class="back-btn">‚Üê</button>
                    <div class="header-info">
                        <h1>@profileUsername</h1>
                        <span class="post-count">@(Model?.Count ?? 0) posts</span>
                    </div>
                </div>
            </div>

            <!-- Profile Section -->
            <div class="profile-section">
                <div class="cover-photo">
                    <img src="images/cover-photo.jpg" alt="Cover" class="cover-image">
                </div>

                <div class="profile-info">
                    <div class="avatar-section">
                        <img src="/u/@profileUsername/avatar" alt="@profileUsername" class="profile-avatar">
                        <div class="profile-actions">
                            <button class="action-btn">‚ãØ</button>
                            <button class="action-btn">‚úâÔ∏è</button>
                            <button class="edit-profile-btn">Edit profile</button>
                            @await Html.PartialAsync("~/Views/Shared/_FollowActions.cshtml")
                        </div>
                    </div>

                    <div class="profile-details">
                        <h2 class="profile-name">@profileUsername</h2>
                        <span class="profile-handle">@($"@{profileUsername}")</span>

                        <div class="profile-bio">
                            Software Developer üíª | Tech Enthusiast | Building the future one line of code at a time
                            <br>üåç San Francisco, CA
                            <br>üîó <a href="#">johndoe.dev</a>
                            <br>üìÖ Joined March 2020
                        </div>

                        <div class="profile-stats" data-profile-connections data-username="@profileUsername">
                            <a href="#" class="stat-item">
                                <span class="stat-number" data-following-count>0</span>
                                <span class="stat-label">Following</span>
                            </a>
                            <a href="#" class="stat-item">
                                <span class="stat-number" data-followers-count>0</span>
                                <span class="stat-label">Followers</span>
                            </a>
                        </div>
                        <div class="connections-columns">
                            <div class="connections-column">
                                <h3>Following (<span data-following-count>0</span>)</h3>
                                <div class="connections-scroll" data-following-list></div>
                            </div>
                            <div class="connections-column">
                                <h3>Followers (<span data-followers-count>0</span>)</h3>
                                <div class="connections-scroll" data-followers-list></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Profile Tabs -->
                <div class="profile-tabs">
                    <div class="tab active">Posts</div>
                    <div class="tab">Replies</div>
                    <div class="tab">Highlights</div>
                    <div class="tab">Articles</div>
                    <div class="tab">Media</div>
                    <div class="tab">Likes</div>
                </div>
            </div>

            <!-- Posts Feed -->
            <div class="posts-feed">
                <!-- Pinned Post -->
                <div class="tweet pinned">
                    <div class="pin-indicator">
                        <span class="pin-icon">üìå</span>
                        <span class="pin-text">Pinned</span>
                    </div>
                    <div class="tweet-main">
                        <img src="images/profile-avatar.jpg" alt="User" class="tweet-avatar">
                        <div class="tweet-content">
                            <div class="tweet-header">
                                <span class="tweet-name">John Doe</span>
                                <span class="tweet-handle">#johndoe</span>
                                <span class="tweet-time">¬∑ Dec 15</span>
                                <span class="tweet-more">‚ãØ</span>
                            </div>
                            <div class="tweet-text">
                                üöÄ Excited to share my latest project! Built a full-stack app using React, Node.js, and PostgreSQL.
                                Check it out and let me know what you think!
                                <br><br>
                                #webdev #react #nodejs #postgresql
                            </div>
                            <div class="tweet-media">
                                <img src="images/project-screenshot.jpg" alt="Project" class="tweet-image">
                            </div>
                            <div class="tweet-actions">
                                <button class="action-btn">
                                    <span class="action-icon">üí¨</span>
                                    <span class="action-count">45</span>
                                </button>
                                <button class="action-btn">
                                    <span class="action-icon">üîÑ</span>
                                    <span class="action-count">123</span>
                                </button>
                                <button class="action-btn">
                                    <span class="action-icon">‚ù§Ô∏è</span>
                                    <span class="action-count">289</span>
                                </button>
                                <button class="action-btn">
                                    <span class="action-icon">üìä</span>
                                    <span class="action-count">2.1k</span>
                                </button>
                                <button class="action-btn">
                                    <span class="action-icon">üì§</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Regular Posts -->
                <div class="tweet">
                    <img src="images/profile-avatar.jpg" alt="User" class="tweet-avatar">
                    <div class="tweet-content">
                        <div class="tweet-header">
                            <span class="tweet-name">John Doe</span>
                            <span class="tweet-handle">#johndoe</span>
                            <span class="tweet-time">¬∑ 2h</span>
                            <span class="tweet-more">‚ãØ</span>
                        </div>
                        <div class="tweet-text">
                            Working on some exciting new features today! The debugging process can be challenging but so rewarding when everything clicks üîß‚ú®
                        </div>
                        <div class="tweet-actions">
                            <button class="action-btn">
                                <span class="action-icon">üí¨</span>
                                <span class="action-count">12</span>
                            </button>
                            <button class="action-btn">
                                <span class="action-icon">üîÑ</span>
                                <span class="action-count">34</span>
                            </button>
                            <button class="action-btn">
                                <span class="action-icon">‚ù§Ô∏è</span>
                                <span class="action-count">67</span>
                            </button>
                            <button class="action-btn">
                                <span class="action-icon">üìä</span>
                                <span class="action-count">892</span>
                            </button>
                            <button class="action-btn">
                                <span class="action-icon">üì§</span>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="tweet">
                    <img src="images/profile-avatar.jpg" alt="User" class="tweet-avatar">
                    <div class="tweet-content">
                        <div class="tweet-header">
                            <span class="tweet-name">John Doe</span>
                            <span class="tweet-handle">#johndoe</span>
                            <span class="tweet-time">¬∑ 1d</span>
                            <span class="tweet-more">‚ãØ</span>
                        </div>
                        <div class="tweet-text">
                            Just attended an amazing tech conference! So many innovative ideas and met some brilliant people. The future of tech is looking bright üåü
                            <br><br>
                            Key takeaways:
                            <br>‚Ä¢ AI is revolutionizing everything
                            <br>‚Ä¢ Remote work is here to stay
                            <br>‚Ä¢ Focus on user experience above all
                        </div>
                        <div class="tweet-actions">
                            <button class="action-btn">
                                <span class="action-icon">üí¨</span>
                                <span class="action-count">89</span>
                            </button>
                            <button class="action-btn">
                                <span class="action-icon">üîÑ</span>
                                <span class="action-count">234</span>
                            </button>
                            <button class="action-btn">
                                <span class="action-icon">‚ù§Ô∏è</span>
                                <span class="action-count">567</span>
                            </button>
                            <button class="action-btn">
                                <span class="action-icon">üìä</span>
                                <span class="action-count">3.2k</span>
                            </button>
                            <button class="action-btn">
                                <span class="action-icon">üì§</span>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="tweet">
                    <img src="images/profile-avatar.jpg" alt="User" class="tweet-avatar">
                    <div class="tweet-content">
                        <div class="tweet-header">
                            <span class="tweet-name">John Doe</span>
                            <span class="tweet-handle">#johndoe</span>
                            <span class="tweet-time">¬∑ 3d</span>
                            <span class="tweet-more">‚ãØ</span>
                        </div>
                        <div class="tweet-text">
                            Coffee, code, repeat ‚òïÔ∏èüíª
                            <br><br>
                            What's your coding fuel of choice?
                        </div>
                        <div class="tweet-actions">
                            <button class="action-btn">
                                <span class="action-icon">üí¨</span>
                                <span class="action-count">156</span>
                            </button>
                            <button class="action-btn">
                                <span class="action-icon">üîÑ</span>
                                <span class="action-count">78</span>
                            </button>
                            <button class="action-btn">
                                <span class="action-icon">‚ù§Ô∏è</span>
                                <span class="action-count">234</span>
                            </button>
                            <button class="action-btn">
                                <span class="action-icon">üìä</span>
                                <span class="action-count">1.5k</span>
                            </button>
                            <button class="action-btn">
                                <span class="action-icon">üì§</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Sidebar -->
        <div class="right-sidebar">
            <div class="search-bar">
                <input type="text" placeholder="Search">
                <span class="search-icon">üîç</span>
            </div>

            <div class="suggestions-section">
                <h2>You might like</h2>
                <div class="suggestion-item">
                    <img src="images/suggested1.jpg" alt="User" class="suggestion-avatar">
                    <div class="suggestion-info">
                        <div class="suggestion-name">Jane Smith</div>
                        <div class="suggestion-handle">#janesmith</div>
                    </div>
                    <button class="follow-btn">Follow</button>
                </div>
                <div class="suggestion-item">
                    <img src="images/suggested2.jpg" alt="User" class="suggestion-avatar">
                    <div class="suggestion-info">
                        <div class="suggestion-name">Tech Guru</div>
                        <div class="suggestion-handle">#techguru</div>
                    </div>
                    <button class="follow-btn">Follow</button>
                </div>
                <div class="suggestion-item">
                    <img src="images/suggested3.jpg" alt="User" class="suggestion-avatar">
                    <div class="suggestion-info">
                        <div class="suggestion-name">Design Pro</div>
                        <div class="suggestion-handle">#designpro</div>
                    </div>
                    <button class="follow-btn">Follow</button>
                </div>
            </div>

            <div class="trending-section">
                <h2>What's happening</h2>
                <div class="trending-item">
                    <div class="trending-category">Technology ¬∑ Trending</div>
                    <div class="trending-topic">JavaScript</div>
                    <div class="trending-posts">45.2k posts</div>
                </div>
                <div class="trending-item">
                    <div class="trending-category">Programming ¬∑ Trending</div>
                    <div class="trending-topic">React</div>
                    <div class="trending-posts">32.1k posts</div>
                </div>
            </div>
        </div>
    </div>

    <script src="js/profile.js"></script>
    <script src="/js/connections.js"></script>
</body>
</html>
