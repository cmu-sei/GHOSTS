@{
    var profileUsername = (ViewContext.RouteData.Values["username"] as string)?.Trim();
    if (string.IsNullOrWhiteSpace(profileUsername))
    {
        profileUsername = Context.Request.Cookies["username"];
    }

    profileUsername ??= "user";
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>u/@profileUsername - Reddit</title>
    <link rel="stylesheet" href="css/profile.css">
    <link rel="icon" href="images/reddit-icon.png">
    <style>
        .follow-action-form {
            display: inline-block;
            margin-right: 8px;
        }

        .follow-action-button {
            background: #ff4500;
            border: none;
            color: #fff;
            padding: 8px 18px;
            border-radius: 999px;
            font-weight: 600;
            cursor: pointer;
        }

        .connections-card {
            background: #1a1a1b;
            border: 1px solid #343536;
            border-radius: 12px;
            padding: 20px;
            margin-top: 16px;
        }

        .connections-title {
            margin: 0 0 12px;
            font-size: 18px;
            color: #d7dadc;
        }

        .connections-summary {
            display: flex;
            justify-content: space-between;
            margin-bottom: 16px;
            font-size: 14px;
            color: #818384;
        }

        .connections-columns {
            display: grid;
            gap: 12px;
        }

        .connections-column {
            background: #272729;
            border-radius: 8px;
            padding: 16px;
        }

        .connections-column h3 {
            margin: 0 0 12px;
            font-size: 14px;
            color: #d7dadc;
        }

        .connections-scroll {
            max-height: 220px;
            overflow-y: auto;
        }

        .connection-item {
            background: transparent;
        }

        .connection-item:hover {
            background: rgba(255, 69, 0, 0.15);
        }

        .connection-name {
            color: #d7dadc;
        }

        .connection-bio {
            color: #818384;
        }
    </style>
</head>
<body>
    <div class="app">
        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <div class="logo">
                    <img src="images/reddit-logo.png" alt="Reddit" class="reddit-logo">
                    <span class="reddit-text">reddit</span>
                </div>
                <div class="search-container">
                    <input type="text" placeholder="Search Reddit" class="search-input">
                    <button class="search-btn">üîç</button>
                </div>
            </div>
            <div class="header-right">
                <button class="header-btn">üìà</button>
                <button class="header-btn">üí¨</button>
                <button class="header-btn">üîî</button>
                <button class="header-btn">‚ûï</button>
                <div class="user-menu">
                    <img src="/u/@profileUsername/avatar" alt="@profileUsername" class="user-avatar">
                    <span class="username">u/@profileUsername</span>
                    <span class="dropdown-arrow">‚ñº</span>
                </div>
            </div>
        </header>

        <div class="main-container">
            <!-- Profile Header -->
            <div class="profile-header">
                <div class="profile-banner">
                    <img src="images/profile-banner.jpg" alt="Profile Banner" class="banner-image">
                </div>
                <div class="profile-info">
                    <div class="profile-left">
                        <img src="/u/@profileUsername/avatar" alt="@profileUsername" class="profile-avatar">
                        <div class="profile-details">
                            <h1 class="profile-username">u/@profileUsername</h1>
                            <div class="profile-stats">
                                <div class="stat-item">
                                    <span class="stat-value">1.2k</span>
                                    <span class="stat-label">Karma</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-value">3y</span>
                                    <span class="stat-label">Cake day</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="profile-right">
                        @await Html.PartialAsync("~/Views/Shared/_FollowActions.cshtml")
                        <button class="chat-btn">Chat</button>
                        <button class="more-btn">‚ãØ</button>
                    </div>
                </div>
                <div class="connections-card" data-profile-connections data-username="@profileUsername">
                    <h2 class="connections-title">Connections</h2>
                    <div class="connections-summary">
                        <span><strong data-followers-count>0</strong> followers</span>
                        <span><strong data-following-count>0</strong> following</span>
                    </div>
                    <div class="connections-columns">
                        <div class="connections-column">
                            <h3>Following (<span data-following-count>0</span>)</h3>
                            <div class="connections-scroll" data-following-list></div>
                        </div>
                        <div class="connections-column">
                            <h3>Followers (<span data-followers-count>0</span>)</h3>
                            <div class="connections-scroll" data-followers-list></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="profile-content">
                <!-- Left Sidebar -->
                <div class="sidebar">
                    <div class="about-card">
                        <h3>About</h3>
                        <div class="about-content">
                            <p>Software developer passionate about technology and open source. Love discussing programming, AI, and the future of tech.</p>

                            <div class="about-stats">
                                <div class="about-stat">
                                    <span class="about-icon">üç∞</span>
                                    <span class="about-text">Joined March 15, 2021</span>
                                </div>
                                <div class="about-stat">
                                    <span class="about-icon">‚≠ê</span>
                                    <span class="about-text">1,247 Post Karma</span>
                                </div>
                                <div class="about-stat">
                                    <span class="about-icon">üí¨</span>
                                    <span class="about-text">892 Comment Karma</span>
                                </div>
                                <div class="about-stat">
                                    <span class="about-icon">üë•</span>
                                    <span class="about-text"><span data-followers-count>0</span> followers ‚Ä¢ <span data-following-count>0</span> following</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="active-communities-card">
                        <h3>Active in these communities</h3>
                        <div class="community-list">
                            <div class="community-item">
                                <img src="images/programming-icon.jpg" alt="programming" class="community-icon">
                                <div class="community-info">
                                    <div class="community-name">r/programming</div>
                                    <div class="community-members">5.2M members</div>
                                </div>
                            </div>
                            <div class="community-item">
                                <img src="images/javascript-icon.jpg" alt="javascript" class="community-icon">
                                <div class="community-info">
                                    <div class="community-name">r/javascript</div>
                                    <div class="community-members">2.1M members</div>
                                </div>
                            </div>
                            <div class="community-item">
                                <img src="images/webdev-icon.jpg" alt="webdev" class="community-icon">
                                <div class="community-info">
                                    <div class="community-name">r/webdev</div>
                                    <div class="community-members">1.8M members</div>
                                </div>
                            </div>
                            <div class="community-item">
                                <img src="images/reactjs-icon.jpg" alt="reactjs" class="community-icon">
                                <div class="community-info">
                                    <div class="community-name">r/reactjs</div>
                                    <div class="community-members">450k members</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Main Content -->
                <div class="main-content">
                    <!-- Profile Tabs -->
                    <div class="profile-tabs">
                        <button class="tab-btn active">POSTS</button>
                        <button class="tab-btn">COMMENTS</button>
                        <button class="tab-btn">SAVED</button>
                        <button class="tab-btn">HIDDEN</button>
                        <button class="tab-btn">UPVOTED</button>
                        <button class="tab-btn">DOWNVOTED</button>
                    </div>

                    <!-- Sort Options -->
                    <div class="sort-container">
                        <div class="sort-tabs">
                            <button class="sort-tab active">üî• Hot</button>
                            <button class="sort-tab">üÜï New</button>
                            <button class="sort-tab">‚≠ê Top</button>
                        </div>
                    </div>

                    <!-- Posts -->
                    <div class="posts-feed">
                        <!-- Post 1 -->
                        <div class="post">
                            <div class="post-votes">
                                <button class="vote-btn upvote upvoted">‚ñ≤</button>
                                <span class="vote-count">234</span>
                                <button class="vote-btn downvote">‚ñº</button>
                            </div>
                            <div class="post-content">
                                <div class="post-header">
                                    <img src="images/programming-icon.jpg" alt="programming" class="subreddit-icon">
                                    <span class="subreddit-name">r/programming</span>
                                    <span class="post-meta">
                                        ‚Ä¢ Posted by u/johndoe
                                        <span class="post-time">2 days ago</span>
                                    </span>
                                </div>
                                <h2 class="post-title">Best practices for writing clean, maintainable JavaScript code</h2>
                                <div class="post-text">
                                    After years of working with JavaScript, I've compiled a list of best practices that have helped me write cleaner, more maintainable code. Here are the top 10 tips that every developer should know:

                                    1. Use meaningful variable names
                                    2. Keep functions small and focused
                                    3. Avoid deep nesting
                                    4. Use const and let instead of var
                                    5. Implement proper error handling
                                    ...
                                </div>
                                <div class="post-actions">
                                    <button class="action-btn">
                                        <span class="action-icon">üí¨</span>
                                        <span class="action-text">45 Comments</span>
                                    </button>
                                    <button class="action-btn">
                                        <span class="action-icon">üîó</span>
                                        <span class="action-text">Share</span>
                                    </button>
                                    <button class="action-btn">
                                        <span class="action-icon">üíæ</span>
                                        <span class="action-text">Save</span>
                                    </button>
                                    <button class="action-btn">
                                        <span class="action-icon">‚ãØ</span>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Post 2 -->
                        <div class="post">
                            <div class="post-votes">
                                <button class="vote-btn upvote upvoted">‚ñ≤</button>
                                <span class="vote-count">156</span>
                                <button class="vote-btn downvote">‚ñº</button>
                            </div>
                            <div class="post-content">
                                <div class="post-header">
                                    <img src="images/webdev-icon.jpg" alt="webdev" class="subreddit-icon">
                                    <span class="subreddit-name">r/webdev</span>
                                    <span class="post-meta">
                                        ‚Ä¢ Posted by u/johndoe
                                        <span class="post-time">5 days ago</span>
                                    </span>
                                </div>
                                <h2 class="post-title">My experience transitioning from jQuery to React</h2>
                                <div class="post-text">
                                    Recently made the switch from jQuery to React for a major project. Here's what I learned during the transition and tips for others considering the same move...
                                </div>
                                <div class="post-actions">
                                    <button class="action-btn">
                                        <span class="action-icon">üí¨</span>
                                        <span class="action-text">23 Comments</span>
                                    </button>
                                    <button class="action-btn">
                                        <span class="action-icon">üîó</span>
                                        <span class="action-text">Share</span>
                                    </button>
                                    <button class="action-btn">
                                        <span class="action-icon">üíæ</span>
                                        <span class="action-text">Save</span>
                                    </button>
                                    <button class="action-btn">
                                        <span class="action-icon">‚ãØ</span>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Post 3 -->
                        <div class="post">
                            <div class="post-votes">
                                <button class="vote-btn upvote upvoted">‚ñ≤</button>
                                <span class="vote-count">89</span>
                                <button class="vote-btn downvote">‚ñº</button>
                            </div>
                            <div class="post-content">
                                <div class="post-header">
                                    <img src="images/reactjs-icon.jpg" alt="reactjs" class="subreddit-icon">
                                    <span class="subreddit-name">r/reactjs</span>
                                    <span class="post-meta">
                                        ‚Ä¢ Posted by u/johndoe
                                        <span class="post-time">1 week ago</span>
                                    </span>
                                </div>
                                <h2 class="post-title">Useful React hooks that aren't talked about enough</h2>
                                <div class="post-text">
                                    While useState and useEffect get all the attention, there are several other React hooks that can significantly improve your development experience. Let me share some hidden gems...
                                </div>
                                <div class="post-actions">
                                    <button class="action-btn">
                                        <span class="action-icon">üí¨</span>
                                        <span class="action-text">67 Comments</span>
                                    </button>
                                    <button class="action-btn">
                                        <span class="action-icon">üîó</span>
                                        <span class="action-text">Share</span>
                                    </button>
                                    <button class="action-btn">
                                        <span class="action-icon">üíæ</span>
                                        <span class="action-text">Save</span>
                                    </button>
                                    <button class="action-btn">
                                        <span class="action-icon">‚ãØ</span>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Post 4 -->
                        <div class="post">
                            <div class="post-votes">
                                <button class="vote-btn upvote upvoted">‚ñ≤</button>
                                <span class="vote-count">312</span>
                                <button class="vote-btn downvote">‚ñº</button>
                            </div>
                            <div class="post-content">
                                <div class="post-header">
                                    <img src="images/javascript-icon.jpg" alt="javascript" class="subreddit-icon">
                                    <span class="subreddit-name">r/javascript</span>
                                    <span class="post-meta">
                                        ‚Ä¢ Posted by u/johndoe
                                        <span class="post-time">2 weeks ago</span>
                                    </span>
                                </div>
                                <h2 class="post-title">Understanding JavaScript closures with practical examples</h2>
                                <div class="post-text">
                                    Closures are one of the most powerful features in JavaScript, but they can be confusing for beginners. Here's a comprehensive guide with real-world examples...
                                </div>
                                <div class="post-actions">
                                    <button class="action-btn">
                                        <span class="action-icon">üí¨</span>
                                        <span class="action-text">128 Comments</span>
                                    </button>
                                    <button class="action-btn">
                                        <span class="action-icon">üîó</span>
                                        <span class="action-text">Share</span>
                                    </button>
                                    <button class="action-btn">
                                        <span class="action-icon">üíæ</span>
                                        <span class="action-text">Save</span>
                                    </button>
                                    <button class="action-btn">
                                        <span class="action-icon">‚ãØ</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="js/profile.js"></script>
    <script src="/js/connections.js"></script>
</body>
</html>
